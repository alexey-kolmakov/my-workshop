#!/bin/bash
# diagnostics.sh ‚Äî –º–æ–¥—É–ª—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π

echo "=============================="
echo "   –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ú–ê–°–¢–ï–†–°–ö–û–ô"
echo "=============================="
echo

# 1. –ì–¥–µ –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è
echo "üìç –¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:"
pwd
echo

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Git
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Git:"
if [ -d ".git" ]; then
    echo "‚úî Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞–π–¥–µ–Ω"
    echo "   –¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞: $(git branch --show-current)"
else
    echo "‚ùå Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ù–ï –Ω–∞–π–¥–µ–Ω"
    exit 1
fi
echo

# 3. –°—Ç–∞—Ç—É—Å Git
echo "üì¶ –°—Ç–∞—Ç—É—Å Git:"
git status --short
if [ $? -eq 0 ]; then
    echo "(–ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç ‚Äî –≤—Å—ë —á–∏—Å—Ç–æ)"
fi
echo

# 4. –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç
echo "üïí –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:"
git log -1 --pretty=format:"%h ‚Äî %s (%ci)"
echo
echo

# 5. –°–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π
echo "üß© –ú–æ–¥—É–ª–∏ –≤ scripts/:"
ls -1 scripts/
echo

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ files.txt
echo "üìÑ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ files.txt:"
if [ -f "files.txt" ]; then
    cat files.txt
else
    echo "‚ùå –§–∞–π–ª files.txt –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
fi
echo

# 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ —Å GitHub
echo "üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ —Å GitHub:"
git ls-remote --heads origin &> /dev/null
if [ $? -eq 0 ]; then
    echo "‚úî GitHub –¥–æ—Å—Ç—É–ø–µ–Ω"
else
    echo "‚ùå –ù–µ—Ç —Å–≤—è–∑–∏ —Å GitHub"
fi
echo

echo "=============================="
echo "   –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê"
echo "=============================="
