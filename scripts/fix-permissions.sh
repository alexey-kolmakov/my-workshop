#!/bin/bash
# fix-permissions.sh — модуль для исправления прав доступа.
# Теперь умеет спрашивать путь, если его не указали.

TARGET="$1"

# Если путь не указан — спрашиваем
if [ -z "$TARGET" ]; then
    read -p "Введите путь к папке, в которой нужно исправить права: " TARGET
fi

# Проверяем, что папка существует
if [ ! -d "$TARGET" ]; then
    echo "Ошибка: $TARGET не является директорией."
    exit 1
fi

echo "Исправляю права в $TARGET..."

# Меняем владельца на текущего пользователя
chown -R "$(whoami)":"$(whoami)" "$TARGET"

# Права для директорий
find "$TARGET" -type d -exec chmod 755 {} \;

# Права для файлов
find "$TARGET" -type f -exec chmod 644 {} \;

echo "Готово: права исправлены."
